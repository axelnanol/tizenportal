/**
 * Audiobookshelf Bundle Styles for TizenPortal
 * 
 * TV-optimized styles for Audiobookshelf.
 * Designed to work with Tailwind CSS v4 and Nuxt.
 */

/* ==========================================================================
   CRITICAL TV LAYOUT FIXES - SCROLLBAR HIDING
   TV screens don't need visible scrollbars. Hide them while keeping scroll.
   ========================================================================== */

/* Hide scrollbars globally - webkit (Chrome/Tizen) */
::-webkit-scrollbar {
  width: 0px !important;
  height: 0px !important;
  display: none !important;
}

/* Ensure content can still scroll but scrollbars are hidden */
html, body,
#page-wrapper,
#bookshelf,
.bookshelfRow,
.categorizedBookshelfRow,
.bookshelf-row {
  scrollbar-width: none !important;  /* Firefox */
  -ms-overflow-style: none !important;  /* IE/Edge */
}

/* ==========================================================================
   FILTER/SORT DROPDOWN FIXES
   ABS uses controls-library-filter-select and controls-library-sort-select
   ========================================================================== */

/* Filter/sort control wrappers */
.libraryFilterMenu,
[class*="library-filter"],
[class*="library-sort"],
[class*="FilterSelect"],
[class*="SortSelect"] {
  min-width: 180px !important;
}

/* Filter dropdown trigger button */
#filter-by-btn,
button[aria-label*="filter" i],
button[aria-label*="Filter" i],
[class*="filter"] button,
.filter-dropdown,
.sort-dropdown {
  min-width: 140px !important;
}

/* Sort dropdown trigger */
#sort-by-btn,
button[aria-label*="sort" i],
button[aria-label*="Sort" i],
[class*="sort"] button {
  min-width: 140px !important;
}

/* Dropdown menus when open */
.ui-dropdown-menu,
[role="menu"],
[role="listbox"],
.dropdown-menu {
  min-width: 180px !important;
  max-width: 300px !important;
}

/* Dropdown items - make navigable with spacing */
[role="menuitem"],
[role="option"],
.dropdown-item,
.ui-dropdown-menu > div,
.ui-dropdown-menu > a,
.ui-dropdown-menu > button,
[role="menu"] > div,
[role="menu"] > button,
[role="listbox"] > div,
.libraryFilterMenu li,
.libraryFilterMenu ul > li,
.ui-dropdown-menu li,
.ui-dropdown-menu ul li {
  display: block !important;
  padding: 8px 12px !important;
  margin: 2px 0 !important;
  min-height: 36px !important;
  cursor: pointer !important;
}

/* Filter dropdown back button (arrow left icon) */
.ui-dropdown-menu li span.mdi-arrow-left,
.ui-dropdown-menu li .material-symbols {
  margin-right: 8px !important;
}

/* Dropdown item focus state */
[role="menuitem"]:focus,
[role="option"]:focus,
.dropdown-item:focus,
.ui-dropdown-menu > div:focus,
.ui-dropdown-menu > a:focus,
.ui-dropdown-menu > button:focus,
.libraryFilterMenu li:focus,
.ui-dropdown-menu li:focus,
.ui-dropdown-menu ul li:focus {
  outline: 2px solid #1ad691 !important;
  outline-offset: -2px !important;
  background: rgba(26, 214, 145, 0.2) !important;
}

/* ==========================================================================
   CSS VARIABLE POLYFILL FOR CHROME 47
   Chrome 47 doesn't support CSS custom properties (var()).
   Tailwind CSS v4 uses calc(var(--spacing)*N) for all utility classes.
   We must provide explicit fallback values.
   --spacing: 0.25rem = 4px (at 16px base font-size)
   ========================================================================== */

/* Image constraints - CRITICAL for Chrome 47 */
img {
  max-width: 100% !important;
  height: auto !important;
}

/* Logo sizing (appbar) - w-8 h-8, sm:w-10 sm:h-10 */
#appbar img,
.nuxt-link-active img {
  width: 40px !important;
  min-width: 40px !important;
  height: 40px !important;
  max-width: 40px !important;
}

/* Width utilities that use var(--spacing) */
.w-8 { width: 32px !important; }
.w-9 { width: 36px !important; }
.w-10 { width: 40px !important; }
.w-12 { width: 48px !important; }
.w-16 { width: 64px !important; }
.w-20 { width: 80px !important; }
.w-32 { width: 128px !important; }
.w-40 { width: 160px !important; }
.w-48 { width: 192px !important; }
.w-52 { width: 208px !important; }
.w-64 { width: 256px !important; }
.w-80 { width: 320px !important; }
.w-full { width: 100% !important; }

/* Height utilities */
.h-4 { height: 16px !important; }
.h-5 { height: 20px !important; }
.h-8 { height: 32px !important; }
.h-9 { height: 36px !important; }
.h-10 { height: 40px !important; }
.h-12 { height: 48px !important; }
.h-16 { height: 64px !important; }
.h-20 { height: 80px !important; }
.h-full { height: 100% !important; }
.h-screen { height: 100vh !important; }
.max-h-screen { max-height: 100vh !important; }

/* Em-based utilities - ABS uses these for relative sizing */
.h-6e { height: 1.5em !important; }
.h-8e { height: 2em !important; }
.pt-6e { padding-top: 1.5em !important; }
.my-6e { margin-top: 1.5em !important; margin-bottom: 1.5em !important; }
.mx-2e { margin-left: 0.5em !important; margin-right: 0.5em !important; }
.pl-8e { padding-left: 2em !important; }
.-bottom-6e { bottom: -1.5em !important; }
.left-4e { left: 1em !important; }
.left-8e { left: 2em !important; }
.w-44e { width: 11em !important; }

/* Min/max width */
.min-w-5 { min-width: 20px !important; }
.min-w-8 { min-width: 32px !important; }
.min-w-10 { min-width: 40px !important; }
.min-w-32 { min-width: 128px !important; }
.min-w-48 { min-width: 192px !important; }
.max-w-52 { max-width: 208px !important; }
.max-w-64 { max-width: 256px !important; }
.max-w-80 { max-width: 320px !important; }
.max-w-full { max-width: 100% !important; }

/* Spacing/margins - Tailwind uses calc(var(--spacing)*N) */
.m-1 { margin: 4px !important; }
.m-2 { margin: 8px !important; }
.mx-1 { margin-left: 4px !important; margin-right: 4px !important; }
.mx-2 { margin-left: 8px !important; margin-right: 8px !important; }
.mx-3 { margin-left: 12px !important; margin-right: 12px !important; }
.my-1 { margin-top: 4px !important; margin-bottom: 4px !important; }
.my-2 { margin-top: 8px !important; margin-bottom: 8px !important; }
.mr-1 { margin-right: 4px !important; }
.mr-2 { margin-right: 8px !important; }
.mr-4 { margin-right: 16px !important; }
.mr-6 { margin-right: 24px !important; }
.ml-1 { margin-left: 4px !important; }
.ml-2 { margin-left: 8px !important; }
.ml-3 { margin-left: 12px !important; }
.ml-5 { margin-left: 20px !important; }
.mt-1 { margin-top: 4px !important; }
.pt-1 { padding-top: 4px !important; }
.-mt-px { margin-top: -1px !important; }
.-ml-2 { margin-left: -8px !important; }

/* Padding */
.p-1 { padding: 4px !important; }
.p-2 { padding: 8px !important; }
.p-4 { padding: 16px !important; }
.p-5 { padding: 20px !important; }
.px-1 { padding-left: 4px !important; padding-right: 4px !important; }
.px-2 { padding-left: 8px !important; padding-right: 8px !important; }
.px-3 { padding-left: 12px !important; padding-right: 12px !important; }
.px-4 { padding-left: 16px !important; padding-right: 16px !important; }
.px-6 { padding-left: 24px !important; padding-right: 24px !important; }
.px-8 { padding-left: 32px !important; padding-right: 32px !important; }
.py-1 { padding-top: 4px !important; padding-bottom: 4px !important; }
.py-2 { padding-top: 8px !important; padding-bottom: 8px !important; }
.py-6 { padding-top: 24px !important; padding-bottom: 24px !important; }
.pr-1 { padding-right: 4px !important; }
.pr-2 { padding-right: 8px !important; }
.pl-3 { padding-left: 12px !important; }
.pr-10 { padding-right: 40px !important; }
.pb-4 { padding-bottom: 16px !important; }

/* Gap utilities */
.gap-1 { gap: 4px !important; }
.gap-2 { gap: 8px !important; }
.gap-4 { gap: 16px !important; }

/* Border radius */
.rounded { border-radius: 4px !important; }
.rounded-sm { border-radius: 2px !important; }
.rounded-md { border-radius: 6px !important; }
.rounded-lg { border-radius: 8px !important; }
.rounded-full { border-radius: 9999px !important; }
.rounded-b-md { border-bottom-left-radius: 6px !important; border-bottom-right-radius: 6px !important; }

/* Z-index */
.z-10 { z-index: 10 !important; }
.z-40 { z-index: 40 !important; }
.z-50 { z-index: 50 !important; }
.z-60 { z-index: 60 !important; }

/* Text sizes */
.text-xs { font-size: 0.75rem !important; line-height: 1rem !important; }
.text-sm { font-size: 0.875rem !important; line-height: 1.25rem !important; }
.text-base { font-size: 1rem !important; line-height: 1.5rem !important; }
.text-lg { font-size: 1.125rem !important; line-height: 1.75rem !important; }
.text-xl { font-size: 1.25rem !important; line-height: 1.75rem !important; }
.text-2xl { font-size: 1.5rem !important; line-height: 2rem !important; }
.text-3xl { font-size: 1.875rem !important; line-height: 2.25rem !important; }

/* Flexbox utilities - Chrome 47 needs vendor prefixes */
.flex {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
}
.inline-flex {
  display: -webkit-inline-box !important;
  display: -webkit-inline-flex !important;
  display: inline-flex !important;
}
.flex-col {
  -webkit-box-orient: vertical !important;
  -webkit-box-direction: normal !important;
  -webkit-flex-direction: column !important;
  flex-direction: column !important;
}
.flex-row {
  -webkit-box-orient: horizontal !important;
  -webkit-box-direction: normal !important;
  -webkit-flex-direction: row !important;
  flex-direction: row !important;
}
.flex-wrap {
  -webkit-flex-wrap: wrap !important;
  flex-wrap: wrap !important;
}
.flex-nowrap {
  -webkit-flex-wrap: nowrap !important;
  flex-wrap: nowrap !important;
}
.items-center {
  -webkit-box-align: center !important;
  -webkit-align-items: center !important;
  align-items: center !important;
}
.items-start {
  -webkit-box-align: start !important;
  -webkit-align-items: flex-start !important;
  align-items: flex-start !important;
}
.justify-center {
  -webkit-box-pack: center !important;
  -webkit-justify-content: center !important;
  justify-content: center !important;
}
.justify-start {
  -webkit-box-pack: start !important;
  -webkit-justify-content: flex-start !important;
  justify-content: flex-start !important;
}
.justify-between {
  -webkit-box-pack: justify !important;
  -webkit-justify-content: space-between !important;
  justify-content: space-between !important;
}
.grow {
  -webkit-box-flex: 1 !important;
  -webkit-flex-grow: 1 !important;
  flex-grow: 1 !important;
}
.shrink-0 {
  -webkit-flex-shrink: 0 !important;
  flex-shrink: 0 !important;
}

/* Display utilities */
.block { display: block !important; }
.inline-block { display: inline-block !important; }
.hidden { display: none !important; }

/* IMPORTANT: Override hidden for md:block at 1920px viewport */
/* We're always at 1920px on TV, so md: breakpoints should apply */
.hidden.md\\:block,
[class*="hidden"][class*="md:block"] {
  display: block !important;
}
.hidden.sm\\:flex,
[class*="hidden"][class*="sm:flex"] {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
}
.hidden.md\\:flex,
[class*="hidden"][class*="md:flex"] {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
}
.hidden.lg\\:block,
[class*="hidden"][class*="lg:block"] {
  display: block !important;
}

/* Position utilities */
.relative { position: relative !important; }
.absolute { position: absolute !important; }
.fixed { position: fixed !important; }
.inset-0 { top: 0 !important; right: 0 !important; bottom: 0 !important; left: 0 !important; }
.inset-y-0 { top: 0 !important; bottom: 0 !important; }
.top-0 { top: 0 !important; }
.right-0 { right: 0 !important; }
.bottom-0 { bottom: 0 !important; }
.left-0 { left: 0 !important; }

/* Overflow utilities */
.overflow-hidden { overflow: hidden !important; }
.overflow-auto { overflow: auto !important; }
.overflow-x-auto { overflow-x: auto !important; }
.overflow-y-auto { overflow-y: auto !important; }
.overflow-x-hidden { overflow-x: hidden !important; }
.overflow-y-hidden { overflow-y: hidden !important; }

/* Text utilities */
.truncate {
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}
.text-center { text-align: center !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.font-bold { font-weight: 700 !important; }
.font-normal { font-weight: 400 !important; }
.italic { font-style: italic !important; }
.underline { text-decoration: underline !important; }
.leading-3 { line-height: 0.75rem !important; }
.leading-4 { line-height: 1rem !important; }

/* Cursor */
.cursor-pointer { cursor: pointer !important; }

/* Colors - Audiobookshelf palette */
.text-white { color: #ffffff !important; }
.text-gray-100 { color: #f7fafc !important; }
.text-gray-200 { color: #edf2f7 !important; }
.text-gray-300 { color: #e2e8f0 !important; }
.text-gray-400 { color: #a0aec0 !important; }
.text-gray-500 { color: #718096 !important; }
.bg-bg { background-color: #232323 !important; }
.bg-primary { background-color: #2d3748 !important; }
.bg-fg { background-color: #3d4759 !important; }
.bg-success { background-color: #48bb78 !important; }
.bg-warning { background-color: #ed8936 !important; }
.bg-error { background-color: #f56565 !important; }
.text-success { color: #48bb78 !important; }
.text-error { color: #f56565 !important; }
.text-red-500 { color: #f56565 !important; }

/* Borders */
.border { border-width: 1px !important; }
.border-t { border-top-width: 1px !important; }
.border-b { border-bottom-width: 1px !important; }
.border-gray-500 { border-color: #718096 !important; }
.border-gray-600 { border-color: #4a5568 !important; }
.border-black-200 { border-color: #1a1a1a !important; }
.border-black-300 { border-color: #2d2d2d !important; }

/* Shadows */
.shadow-xs { box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.05) !important; }
.shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important; }
.shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important; }
.shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important; }

/* Pointer events */
.pointer-events-none { pointer-events: none !important; }
.pointer-events-auto { pointer-events: auto !important; }

/* Opacity utilities */
.opacity-0 { opacity: 0 !important; }
.opacity-90 { opacity: 0.9 !important; }

/* ==========================================================================
   LINK COLOR RESET
   Override default browser blue link color to white.
   ABS uses white/gray text for links, not browser default blue.
   ========================================================================== */

/* All links should inherit color, not use browser default blue */
a, a:link, a:visited, a:hover, a:active {
  color: inherit !important;
  text-decoration: none !important;
}

/* Siderail links - white text */
#siderail-buttons-container a,
[role="toolbar"][aria-orientation="vertical"] a {
  color: #ffffff !important;
}

/* Appbar links - white/gray text */
#appbar a,
#appbar a:link,
#appbar a:visited {
  color: #ffffff !important;
}
#appbar a:hover {
  color: #edf2f7 !important;
}

/* Material symbols icons should not be colored blue */
.material-symbols,
span.material-symbols {
  color: inherit !important;
}

/* Icon text in siderail */
#siderail-buttons-container .material-symbols {
  color: #ffffff !important;
  font-size: 1.5rem !important;
}

/* Icon text in appbar */
#appbar .material-symbols {
  color: #ffffff !important;
}

/* ==========================================================================
   BUTTON BACKGROUND FIX - CHROME 47 TRANSPARENCY ISSUE
   Chrome 47 may render buttons with white backgrounds by default.
   Chrome 47 does NOT support :has() pseudo-class, so we use broader selectors.
   Force transparent backgrounds on all ABS icon buttons.
   ========================================================================== */

/* All buttons in appbar - force transparent background */
#appbar button {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
}

/* ALL buttons in the app - nuclear option for Chrome 47 */
button {
  background-color: transparent !important;
}

/* Buttons with specific classes */
button.icon-btn,
button[class*="icon"],
.iconBtn,
[class*="IconBtn"],
button.rounded-full,
button.rounded-md,
button.rounded-lg,
.btn-icon,
.icon-button {
  background: transparent !important;
  background-color: transparent !important;
}

/* Context menu / triple-dot buttons */
button[aria-label*="more"],
button[aria-label*="More"],
button[aria-label*="menu"],
button[aria-label*="Menu"],
button[aria-label*="options"],
button[aria-label*="Options"] {
  background: transparent !important;
  background-color: transparent !important;
}

/* Page wrapper buttons (content area) */
#page-wrapper button,
.page button {
  background: transparent !important;
  background-color: transparent !important;
}

/* Ensure siderail buttons are also transparent */
#siderail-buttons-container a,
#siderail-buttons-container button {
  background: transparent !important;
  background-color: transparent !important;
}

/* ==========================================================================
   ELEMENT SPACING - GAPS FOR SPATIAL NAVIGATION
   CSS-first approach: Minimum 4px gap between focusable elements.
   This ensures spatial navigation can reliably distinguish adjacent elements.
   ========================================================================== */

/* CSS variable for minimum spatial navigation gap */
:root {
  --tp-spatial-gap: 4px;
}

/* Siderail link spacing - gap between each navigation item */
#siderail-buttons-container {
  gap: var(--tp-spatial-gap, 4px) !important;
}
#siderail-buttons-container a {
  margin-bottom: var(--tp-spatial-gap, 4px) !important;
}

/* Appbar element spacing */
#appbar > .flex > * {
  margin-right: 8px !important;
}
#appbar > .flex > *:last-child {
  margin-right: 0 !important;
}

/* Appbar icon buttons need more margin */
#appbar a[href*="/config"],
#appbar a[href*="/upload"],
#appbar a[href*="/stats"],
#appbar a[href*="/account"] {
  margin-left: 8px !important;
  margin-right: 8px !important;
}

/* Appbar height - h-16 = 64px */
.w-full.h-16.bg-primary {
  height: 64px !important;
}

/* ==========================================================================
   BOOKSHELF ROW LAYOUT - HORIZONTAL SCROLLING
   Book cards must display horizontally with proper gaps for spatial navigation.
   
   NOTE: There are TWO bookshelf layouts:
   1. Homepage (BookShelfCategorized) - uses flexbox, normal scroll
   2. Library page (LazyBookshelf) - uses virtual scroll with absolute + transform
   
   CRITICAL: Do NOT override display, flex, or align properties on homepage
   as ABS calculates sizes dynamically and our overrides break it.
   ========================================================================== */

/* Bookshelf row container - horizontal scroll - LIBRARY PAGE */
.bookshelfRow {
  /* Library page uses absolute positioning, don't override display */
  overflow-x: auto !important;
  overflow-y: hidden !important;
  -webkit-overflow-scrolling: touch !important;
}

/* Categorized bookshelf row - HOMEPAGE - cards inside flex container */
/* Default card height is 192px, plus ~50px for labels below, plus pt-6e padding */
.categorizedBookshelfRow {
  overflow-x: auto !important;
  overflow-y: visible !important;
  -webkit-overflow-scrolling: touch !important;
  min-height: 280px !important;
}

/* The inner content div needs to NOT collapse */
.categorizedBookshelfRow > div {
  height: auto !important;
  min-height: 250px !important;
}

/* The flex container with cards - MUST be horizontal row */
.categorizedBookshelfRow .flex.items-center {
  -webkit-box-orient: horizontal !important;
  -webkit-box-direction: normal !important;
  -webkit-flex-direction: row !important;
  flex-direction: row !important;
  -webkit-flex-wrap: nowrap !important;
  flex-wrap: nowrap !important;
  min-height: 220px !important;
}

/* Homepage cards only - position relative for flex layout (NOT library page) */
/* Be specific: only target card elements directly in the flex container */
.categorizedBookshelfRow .flex.items-center > [id^="book-card-"],
.categorizedBookshelfRow .flex.items-center > [id^="series-card-"] {
  position: relative !important;
}

/* Shelf category labels ("Continue Listening", etc.) */
/* The placard sits ON TOP of the wooden divider bar - needs higher z-index */
.categorizedBookshelfRow > div > .categoryPlacard {
  z-index: 30 !important;
}

/* The shelf divider (wooden bar) */
.bookshelfDividerCategorized {
  z-index: 20 !important;
}

/* ========================================================================== 
   SERIES CARD LABELS - HIDDEN
   
   Series cards have labels that are problematic on Tizen:
   - Height calculation issues (using em units with variable parent font-size)
   - Opacity-0 overlay showing incorrectly
   
   Solution: Hide the labels entirely. Users navigate to series cards directly.
   The card image shows the series name overlay on focus anyway.
   ========================================================================== */

/* Hide series card labels - both standard and detail variants */
[id^="series-card-"] > .categoryPlacard,
[id^="series-card-"] > div.relative.z-30 {
  display: none !important;
}

/* Also hide collection card labels for consistency */
[id^="collection-card-"] > .categoryPlacard {
  display: none !important;
}

/* Series/collection hover overlay - keep hidden until focus */
[id^="series-card-"] .opacity-0,
[id^="collection-card-"] .opacity-0 {
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* Show overlay on focus (TV doesn't have hover) */
[id^="series-card-"]:focus .opacity-0,
[id^="collection-card-"]:focus .opacity-0 {
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
}

/* Book card container - DO NOT override position or size - ABS calculates dynamically */
[id^="book-card-"],
[id^="series-card-"] {
  /* CRITICAL: Do NOT set position - ABS uses position: absolute with transform: translate3d() */
  /* CRITICAL: Do NOT set width/height - ABS calculates based on sizeMultiplier and aspectRatio */
  /* Only override flex shrink to prevent sizing issues */
  -webkit-flex-shrink: 0 !important;
  flex-shrink: 0 !important;
}

/* ==========================================================================
   VUE/NUXT HIDDEN ELEMENTS
   Force-hide elements that Vue renders with display:none inline style.
   Chrome 47 may have issues with Vue's conditional rendering.
   ========================================================================== */

/* Ensure inline display:none is respected */
[style*="display: none"],
[style*="display:none"] {
  display: none !important;
  visibility: hidden !important;
}

/* Hidden menus and dropdowns */
.librariesDropdownMenu[style*="display: none"],
.globalSearchMenu[style*="display: none"],
.globalTaskRunningMenu[style*="display: none"],
[role="menu"][style*="display: none"] {
  display: none !important;
}

/* Modal hidden state */
.modal.hidden,
.modal[style*="display: none"],
.modal.opacity-0 {
  display: none !important;
  visibility: hidden !important;
}

/* Cover background when not needed */
[cy-id="coverBg"][style*="display: none"] {
  display: none !important;
}

/* Title placeholder when image is ready */
[cy-id="titleImageNotReady"][style*="display: none"] {
  display: none !important;
}

/* Selection mode toolbar (when no items selected) */
.absolute[style*="display: none"] {
  display: none !important;
}

/* ==========================================================================
   VIEWPORT AND LAYOUT FIX
   ABS uses h-screen max-h-screen overflow-hidden on main container.
   This cuts off content beyond viewport height.
   We need to allow scrolling while maintaining proper layout.
   ========================================================================== */

/* DON'T lock html/body to fixed width - it breaks layout */
html {
  /* Let browser determine proper width based on viewport */
  overflow-x: hidden !important;
  overflow-y: auto !important;
}

body {
  overflow-x: hidden !important;
  overflow-y: auto !important;
}

/* CRITICAL: Main layout uses h-screen overflow-hidden.
   - h-screen = 100vh (KEEP - children use h-full which needs defined parent)
   - overflow-hidden clips content (OVERRIDE to allow #bookshelf to scroll)
   - DO NOT set height: auto - breaks h-full chain for BookShelfCategorized!
*/
#__layout > div.text-white.overflow-hidden {
  overflow: visible !important;
}

/* Remove max-height constraint */
#__layout > div.max-h-screen {
  max-height: none !important;
}

/* But keep overflow-hidden on elements that need it (cover images, etc) */
[id^="cover-area-"] .overflow-hidden,
.rounded-sm.overflow-hidden,
.bookshelfRow .overflow-hidden {
  overflow: hidden !important;
}

/* ==========================================================================
   FOCUS INDICATORS
   Strong, visible focus styling for TV remote navigation.
   Using ABS accent color (#1ad691) for consistency.
   ========================================================================== */

/* Siderail navigation links */
[role="toolbar"][aria-orientation="vertical"] a:focus,
#siderail-buttons-container a:focus {
  outline: 4px solid #1ad691 !important;
  outline-offset: -4px !important;
  background-color: rgba(26, 214, 145, 0.15) !important;
}

/* Appbar elements */
#appbar a:focus,
#appbar button:focus {
  outline: 3px solid #1ad691 !important;
  outline-offset: 2px !important;
}

/* Book cards (divs with id="book-card-N") */
[id^="book-card-"]:focus {
  outline: 4px solid #1ad691 !important;
  outline-offset: 4px !important;
  z-index: 100 !important;
}

/* Scale up focused book cards */
[id^="book-card-"]:focus [id^="cover-area-"] {
  transform: scale(1.05) !important;
  transition: transform 0.15s ease-out !important;
}

/* ========================================================================
   SERIES & COLLECTION TITLE PLACARDS
   Series/Collection cards show multiple book covers which is confusing for nav.
   We make the title placard underneath focusable instead of the whole card.
   ======================================================================== */

/* Series card title placards */
[id^="series-card-"] .categoryPlacard:focus,
[id^="series-card-"] [cy-id="detailBottomText"]:focus,
[id^="series-card-"] [cy-id="standardBottomText"]:focus,
[id^="series-card-"] [tabindex="0"]:focus {
  outline: 4px solid #1ad691 !important;
  outline-offset: 4px !important;
  z-index: 100 !important;
  position: relative !important;
  background-color: rgba(26, 214, 145, 0.1) !important;
  border-radius: 4px !important;
}

/* Collection card title placards */
[id^="collection-card-"] .categoryPlacard:focus,
[id^="collection-card-"] p.truncate:focus,
[id^="collection-card-"] [tabindex="0"]:focus {
  outline: 4px solid #1ad691 !important;
  outline-offset: 4px !important;
  z-index: 100 !important;
  position: relative !important;
  background-color: rgba(26, 214, 145, 0.1) !important;
  border-radius: 4px !important;
}

/* Author cards */
.author-card:focus,
[id^="author-card-"]:focus {
  outline: 4px solid #1ad691 !important;
  outline-offset: 4px !important;
  z-index: 100 !important;
}

/* Playlist cards */
[id^="playlist-card-"]:focus {
  outline: 4px solid #1ad691 !important;
  outline-offset: 4px !important;
  z-index: 100 !important;
}

/* Table rows (for narrators page, etc.) */
tr[tabindex="0"]:focus,
tr[data-tp-card]:focus {
  outline: 3px solid #1ad691 !important;
  outline-offset: -3px !important;
  background-color: rgba(26, 214, 145, 0.15) !important;
}

/* ========================================================================
   ENTERED CARD STATE (MULTI-ACTION MODE)
   When user presses Enter on a multi-action card, the card is "entered"
   and the hover buttons become visible for navigation.
   ======================================================================== */

/* Mark entered card with stronger outline */
.tp-card-entered,
[data-tp-entered="true"] {
  outline: 4px solid #fcd34d !important; /* Yellow to indicate "inside" */
  outline-offset: 4px !important;
  z-index: 200 !important;
}

/* Show hover buttons when card is entered */
.tp-card-entered [id^="cover-area-"] > div.absolute,
.tp-card-entered [id^="cover-area-"] .group-hover\\:block,
.tp-card-entered [id^="cover-area-"] .group-hover\\:flex,
.tp-card-entered [id^="cover-area-"] [class*="hover:"],
.tp-card-entered [id^="cover-area-"] [class*="opacity-0"],
[data-tp-entered="true"] [id^="cover-area-"] > div.absolute,
[data-tp-entered="true"] [id^="cover-area-"] .group-hover\\:block,
[data-tp-entered="true"] [id^="cover-area-"] .group-hover\\:flex,
[data-tp-entered="true"] [id^="cover-area-"] [class*="hover:"],
[data-tp-entered="true"] [id^="cover-area-"] [class*="opacity-0"] {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
}

/* Make buttons inside entered card focusable and visible */
.tp-card-entered button,
.tp-card-entered [role="button"],
[data-tp-entered="true"] button,
[data-tp-entered="true"] [role="button"] {
  display: inline-block !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
}

/* Focus style for buttons inside entered card */
.tp-card-entered button:focus,
.tp-card-entered [role="button"]:focus,
[data-tp-entered="true"] button:focus,
[data-tp-entered="true"] [role="button"]:focus {
  outline: 3px solid #fff !important;
  outline-offset: 2px !important;
  background-color: rgba(255, 255, 255, 0.2) !important;
}

/* Legacy bookshelf link focus (if any links exist) */
.bookshelfRow a:focus,
.categorizedBookshelfRow a:focus,
#bookshelf a:focus {
  outline: 4px solid #1ad691 !important;
  outline-offset: 4px !important;
  z-index: 100 !important;
  position: relative !important;
}

/* Scale up focused book covers slightly */
.bookshelfRow a:focus > div,
.categorizedBookshelfRow a:focus > div {
  transform: scale(1.05) !important;
  transition: transform 0.15s ease-out !important;
}

/* Dropdown menu items */
[role="menuitem"]:focus,
[role="menu"] li:focus {
  outline: 3px solid #1ad691 !important;
  outline-offset: -3px !important;
  background-color: rgba(26, 214, 145, 0.2) !important;
}

/* Generic buttons */
button:focus:not([aria-hidden="true"]) {
  outline: 3px solid #1ad691 !important;
  outline-offset: 2px !important;
}

/* Form inputs */
input:focus,
select:focus,
textarea:focus {
  outline: 3px solid #1ad691 !important;
  border-color: #1ad691 !important;
}

/* Links in content areas */
a[href]:focus:not(#appbar a):not([role="toolbar"] a):not(.bookshelfRow a):not(.categorizedBookshelfRow a) {
  outline: 2px solid #1ad691 !important;
  outline-offset: 2px !important;
}

/* ==========================================================================
   TV-FRIENDLY TEXT INPUT WRAPPER
   Text inputs shouldn't pop up keyboard immediately on focus.
   We wrap them in a focusable container that shows a display value.
   Press Enter to activate the actual input and show keyboard.
   ========================================================================== */

/* Wrapper container - focusable, shows display value */
.tp-input-wrapper {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
  -webkit-box-align: center !important;
  -webkit-align-items: center !important;
  align-items: center !important;
  position: relative !important;
  width: 100% !important;
  height: 100% !important;
  cursor: pointer !important;
  background: transparent !important;
}

/* Display text (shows current value or placeholder) */
.tp-input-display {
  display: block !important;
  width: 100% !important;
  height: 100% !important;
  padding: 8px 12px !important;
  color: #a0aec0 !important; /* gray-400 placeholder */
  background: transparent !important;
  border: none !important;
  outline: none !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
  pointer-events: none !important;
}

/* Display text with value */
.tp-input-display.has-value {
  color: #edf2f7 !important; /* gray-200 */
}

/* Actual input (hidden until activated) */
.tp-input-wrapper input {
  display: none !important;
}

/* When wrapper is in editing mode */
.tp-input-wrapper.editing .tp-input-display {
  display: none !important;
}
.tp-input-wrapper.editing input {
  display: block !important;
}

/* Wrapper focus state */
.tp-input-wrapper:focus {
  outline: 3px solid #1ad691 !important;
  outline-offset: 2px !important;
}

/* Hint text */
.tp-input-wrapper::after {
  content: "Press OK to edit";
  position: absolute !important;
  right: 8px !important;
  top: 50% !important;
  -webkit-transform: translateY(-50%) !important;
  transform: translateY(-50%) !important;
  font-size: 0.7rem !important;
  color: #718096 !important; /* gray-500 */
  pointer-events: none !important;
}
.tp-input-wrapper.editing::after {
  display: none !important;
}

/* ==========================================================================
   SIDERAIL (LEFT SIDEBAR) - CRITICAL FOR TV NAVIGATION
   The sidebar has class "hidden md:block" which should show at 1920px.
   Chrome 47 may not properly evaluate the breakpoint, so force display.
   ========================================================================== */

/* Siderail container - force visible and properly sized */
[role="toolbar"][aria-orientation="vertical"] {
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
  /* Explicit sizing - w-20 = 80px */
  width: 80px !important;
  min-width: 80px !important;
  max-width: 80px !important;
  /* Position fixed below appbar */
  position: fixed !important;
  left: 0 !important;
  top: 64px !important; /* h-16 = 64px appbar height */
  bottom: 0 !important;
  height: auto !important;
  /* Background and z-index */
  background-color: #232323 !important; /* bg-bg color */
  z-index: 50 !important;
}

/* Siderail navigation links - h-20 = 80px each */
#siderail-buttons-container a {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
  -webkit-box-orient: vertical !important;
  -webkit-flex-direction: column !important;
  flex-direction: column !important;
  -webkit-box-align: center !important;
  -webkit-align-items: center !important;
  align-items: center !important;
  -webkit-box-pack: center !important;
  -webkit-justify-content: center !important;
  justify-content: center !important;
  width: 100% !important;
  height: 80px !important;
  min-height: 80px !important;
  padding: 8px 4px !important;
  border-bottom: 1px solid rgba(45, 55, 72, 0.7) !important; /* border-primary/70 */
  cursor: pointer !important;
  text-decoration: none !important;
}

/* Siderail link icons */
#siderail-buttons-container a .material-symbols {
  font-size: 1.5rem !important;
  margin-bottom: 4px !important;
}

/* Siderail link text */
#siderail-buttons-container a p {
  font-size: 0.9rem !important;
  line-height: 1 !important;
  text-align: center !important;
  margin: 0 !important;
  padding-top: 6px !important;
}

/* Active siderail link indicator (yellow bar) */
#siderail-buttons-container a .bg-yellow-400 {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 2px !important;
  height: 100% !important;
  background-color: #f6e05e !important; /* yellow-400 */
}

/* ==========================================================================
   APPBAR (TOP BAR) - FIXED AT TOP
   ========================================================================== */

/* Main appbar container - h-16 = 64px */
.w-full.h-16.bg-primary {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: 64px !important;
  min-height: 64px !important;
  max-height: 64px !important;
  z-index: 60 !important;
  background-color: #2d3748 !important; /* bg-primary color */
}

/* Appbar inner container */
#appbar {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
  -webkit-box-align: center !important;
  -webkit-align-items: center !important;
  align-items: center !important;
  height: 100% !important;
  padding-left: 24px !important; /* px-6 at md */
  padding-right: 24px !important;
  padding-top: 4px !important;
  padding-bottom: 4px !important;
}

/* Appbar flex container */
#appbar > .flex {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
  -webkit-box-align: center !important;
  -webkit-align-items: center !important;
  align-items: center !important;
  height: 100% !important;
  width: 100% !important;
}

/* Appbar logo - w-10 h-10 at sm+ */
#appbar img {
  width: 40px !important;
  height: 40px !important;
  min-width: 40px !important;
  min-height: 40px !important;
  margin-right: 16px !important;
}

/* Appbar title - show at lg (1024px), we're at 1920px */
#appbar h1 {
  display: block !important;
  font-size: 1.25rem !important;
  margin-right: 24px !important;
  white-space: nowrap !important;
}

/* Library dropdown button */
#appbar button[aria-label*="Library"] {
  height: 32px !important;
  min-width: 100% !important;
  padding-left: 8px !important;
  padding-right: 8px !important;
}

/* Search input container - force wider for TV usability */
#appbar .relative.w-full,
#appbar [class*="w-80"],
#appbar [class*="sm:w-80"],
#appbar form,
#appbar form > .relative {
  width: 400px !important;
  min-width: 400px !important;
  max-width: 400px !important;
}

/* Search input - ensure it fills container */
#appbar input[type="text"],
#appbar input[type="search"],
#appbar input[placeholder*="Search"],
#appbar input[placeholder="Search.."] {
  height: 40px !important;
  width: 100% !important;
  min-width: 350px !important;
  padding: 8px 16px !important;
  border-radius: 4px !important;
  font-size: 18px !important;
}

/* Search input focus state */
#appbar input:focus {
  outline: 3px solid #1ad691 !important;
  outline-offset: 2px !important;
}

/* Appbar icon buttons - w-8 h-8 */
#appbar a[href*="/config"],
#appbar a[href*="/upload"],
#appbar a[href*="/stats"] {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
  -webkit-box-align: center !important;
  -webkit-align-items: center !important;
  align-items: center !important;
  -webkit-box-pack: center !important;
  -webkit-justify-content: center !important;
  justify-content: center !important;
  width: 32px !important;
  height: 32px !important;
  margin: 0 4px !important;
}

/* User account button */
#appbar a[href*="/account"] {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
  -webkit-box-align: center !important;
  -webkit-align-items: center !important;
  align-items: center !important;
  min-width: 128px !important; /* md:w-32 */
  height: 36px !important;
  padding: 8px 12px !important;
  margin-left: 20px !important;
  background-color: #3d4759 !important; /* bg-fg */
  border: 1px solid #718096 !important; /* border-gray-500 */
  border-radius: 4px !important;
}

/* Notifications button - force visible at md+ */
#appbar .hidden.md\\:block,
#appbar [class*="hidden md:block"],
#appbar [class*="hidden sm:flex"] {
  display: -webkit-box !important;
  display: -webkit-flex !important;
  display: flex !important;
}

/* Grow spacer */
#appbar .grow {
  -webkit-box-flex: 1 !important;
  -webkit-flex-grow: 1 !important;
  flex-grow: 1 !important;
}

/* ==========================================================================
   MAIN CONTENT AREA - OFFSET FOR FIXED HEADER/SIDEBAR
   ========================================================================== */

/* Main content should be offset by appbar and siderail */
/* Target the specific layout div, not h-screen which we've overridden */
#__layout > div > div:not(.w-full.h-16):not([role="toolbar"]) {
  padding-top: 64px !important; /* Appbar height */
  padding-left: 80px !important; /* Siderail width */
  box-sizing: border-box !important;
}

/* Alternative selector for the content below appbar */
.text-white.max-h-screen > div:not(.w-full.h-16):not([role="toolbar"]) {
  margin-top: 0 !important;
}

/* ==========================================================================
   BOOKSHELF ADJUSTMENTS
   Make book cards more TV-friendly.
   ========================================================================== */

/* Ensure bookshelf rows are scrollable horizontally */
.categorizedBookshelfRow {
  overflow-x: auto !important;
  scroll-behavior: smooth !important;
}

/* Remove hover-only effects that don't work on TV */
.bookshelfRow a,
.categorizedBookshelfRow a {
  cursor: pointer !important;
}

/* ==========================================================================
   HIDE MOBILE ELEMENTS
   Hide UI elements designed for small screens.
   ========================================================================== */

/* Mobile-specific elements (these shouldn't show at 1920px anyway) */
.mobile-menu,
.mobile-nav,
[class*="mobile-only"] {
  display: none !important;
}

/* ==========================================================================
   MODAL ADJUSTMENTS
   Ensure modals are navigable with D-pad.
   ========================================================================== */

/* Modal close button focus */
.modal button:focus,
[role="dialog"] button:focus {
  outline: 3px solid #1ad691 !important;
  outline-offset: 2px !important;
}

/* Modal should be on top */
.modal,
[role="dialog"] {
  z-index: 9000 !important;
}

/* ==========================================================================
   SCROLLBAR STYLING
   TV-friendly scrollbars.
   ========================================================================== */

::-webkit-scrollbar {
  width: 12px !important;
  height: 12px !important;
}

::-webkit-scrollbar-track {
  background: rgba(35, 35, 35, 0.8) !important;
}

::-webkit-scrollbar-thumb {
  background: #1ad691 !important;
  border-radius: 6px !important;
}

::-webkit-scrollbar-thumb:hover {
  background: #15b578 !important;
}

/* ==========================================================================
   TEXT SELECTION
   Disable text selection (not useful on TV).
   ========================================================================== */

* {
  -webkit-user-select: none !important;
  user-select: none !important;
}

/* Allow selection in inputs */
input,
textarea,
[contenteditable="true"] {
  -webkit-user-select: text !important;
  user-select: text !important;
}

/* ==========================================================================
   PLAYER BAR (placeholder for future)
   Player styles will be added when we analyze the player DOM.
   ========================================================================== */

/* Player container focus */
#mediaPlayerContainer button:focus {
  outline: 3px solid #1ad691 !important;
  outline-offset: 2px !important;
}
